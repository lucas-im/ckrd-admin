import{R as B}from"./rule.bb7c6a80.js";import{J as C,j as v,hg as E}from"./index.53601f29.js";import{u as g}from"./useLoading.4051ea5b.js";import{u as w}from"./useBoolean.98e9c275.js";function A(t){if(t<=0&&t%1!==0)throw new Error("\u5012\u8BA1\u65F6\u7684\u65F6\u95F4\u5E94\u8BE5\u4E3A\u4E00\u4E2A\u6B63\u6574\u6570\uFF01");const{bool:r,setTrue:l,setFalse:c}=w(!1),e=C(0),n=v(()=>Boolean(e.value));let o;function f(m=t){e.value||(c(),e.value=m,o=setInterval(()=>{e.value-=1,e.value<=0&&(clearInterval(o),l())},1e3))}function F(){o=clearInterval(o),e.value=0}return{counts:e,isCounting:n,start:f,stop:F,isComplete:r}}function I(){const{loading:t,startLoading:r,endLoading:l}=g(),{counts:c,start:e,isCounting:n}=A(60),o="\u83B7\u53D6\u9A8C\u8BC1\u7801",f=u=>`${u}\u79D2\u540E\u91CD\u65B0\u83B7\u53D6`,F=v(()=>{let u=o;return t.value&&(u=""),n.value&&(u=f(c.value)),u});function m(u){var i,a;let s=!0;return u.trim()===""?((i=window.$message)==null||i.error("\u624B\u673A\u53F7\u7801\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),s=!1):B.test(u)||((a=window.$message)==null||a.error("\u624B\u673A\u53F7\u7801\u683C\u5F0F\u9519\u8BEF\uFF01"),s=!1),s}async function d(u){var a;if(!m(u)||t.value)return;r();const{data:i}=await E(u);i&&((a=window.$message)==null||a.success("\u9A8C\u8BC1\u7801\u53D1\u9001\u6210\u529F\uFF01"),e()),l()}return{label:F,start:e,isCounting:n,getSmsCode:d,loading:t}}export{I as u};
